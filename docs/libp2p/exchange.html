<div class="row">
    <h1>Exchange</h1>
    <hr>
</div>
<div class="container my-3">
    <p>
        Lo scambio di pacchetti avviene tramite il protocollo BitSwap il cui principio di funzionamento può essere rappresentato attraverso il seguente schema:
    </p>
    <div class="card border-0 justify-content-center my-4" style="background-color: transparent;">
        <img src="docs/libp2p/img/bitswap-flow.png" class="card-img-top mx-auto rounded" alt="..." style="width: 40em;">
    </div>

    <p>
        Il processo di richiesta ed invio dei dati da parte dei nodi avviene secondo la sequenza:
    </p>
    <ul>
        <li>
            i file vengono suddivisi in blocchi di dati, ovvero le unità più piccole trasferibili;
        </li>
        <li>
            i blocchi vengono richiesti e inviati attraverso un’interfaccia API essenziale
            <code>
                get(CID)
                
                put(CID)
            </code>
        </li>
        <li>
            i file richiesti vengono ricercati a livello locale, nel caso il contenuto non sia presente, sia avvia una sessione BitSwap;
        </li>
        <li>
            un peer invia alla rete un messaggio WANT-HAVE che include una ‘wantlist’; inizialmente una wantlist contiene esclusivamente i root CIDs e non è a conoscenza del resto dei blocchi nel DAG
        </li>
        <li>
            i peer in possesso dei contenuti richiesti rispondo alla richiesta (i CIDs inclusi nella wantlist vengono scaricati localmente)
        </li>
        <li>
            le richieste successive vengono inoltrate ai peer presenti nella sessione, questi saranno in possesso del resto dei blocchi necessari a ricomporre i DAG dei root CIDs richiesti
            <div class="card border-0 justify-content-center my-4" style="background-color: transparent;">
                <img src="docs/libp2p/img/bitswap-1.png" class="card-img-top mx-auto rounded" alt="..." style="width: 30em;">
            </div>
        </li>
        <li>
            mentre il messaggio WANT-HAVE è utilizzato per scoprire chi è in possesso dei contenuti, WANT-BLOCK inoltra direttamente la richiesta di invio dei contenuti 
        </li>
        <li>
            una volta ottenuti i blocchi desiderati per terminare la comunicazione il peer invia ai nodi presenti nella sessione il messaggio CANCEL
            <div class="card border-0 justify-content-center my-4" style="background-color: transparent;">
                <img src="docs/libp2p/img/bitswap-2.png" class="card-img-top mx-auto rounded" alt="..." style="width: 30em;">
            </div>
        </li>
    </ul>

   
   

</div>



